<div class="w-full m-5">
  <h5 class="h5"i18n>
    Admin page to add, edit and delete attractions
  </h5>
  <button class="btn btn-primary mt-3 mb-5" (click)="open(content)" i18n>Create new attraction</button>
  <div class="">
    <ng-container *ngIf="attractions | async">
      <table class="table table-bordered">
        <thead class="thead-light">
          <tr>
            <th i18n>Name of the attraction</th>
            <th i18n>Description</th>
            <th i18n>Difficulty / 5</th>
            <th i18n>Visible</th>
            <th i18n>Action</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let formulaireAttraction of formulaireAttractions; let indexForm = index;"
            [formGroup]="formulaireAttraction">
            <tr>
              <td>
                <input type="text" class="form-control" formControlName="nom">
              </td>
              <td>
                <input type="text" class="form-control" formControlName="description">
              </td>
              <td>
                <input type="number" class="form-control" formControlName="difficulte">
              </td>
              <td class="text-center">
                <input class="form-check-input" type="checkbox" formControlName="visible">
              </td>
              <td>
                <button class="btn btn-success" (click)="onSubmit(formulaireAttraction)" i18n>Save</button>
                <button class="btn btn-danger mx-2" (click)="openDeleteModal(delete, formulaireAttraction.getRawValue().attraction_id)" i18n>Delete</button>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </ng-container>
  </div>
</div>


<ng-template #content let-modal>

	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Add an attraction</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div> 
 
	<div class="modal-body">
		<form>
      <div> 
        <label for="nomInput">Name</label> 
        <input [(ngModel)]="newAttraction.nom" type="text" id="nomInput" name="nom" class="form-control mb-3" placeholder="Name of the attraction">
      </div>
      <div>
        <label for="difficulteInput">Difficulty</label>
        <input [(ngModel)]="newAttraction.difficulte" type="number" name="difficulte" id="difficulteInput" min="1" max="5" class="form-control mb-3" placeholder="Rate from 1 to 5">
      </div>
      <div>
        <label for="visibleInput" class="d-block">Visible</label> 
        <input type="checkbox" [(ngModel)]="newAttraction.visible" name="visible" id="visibleInput" rows="3" class="form-check-input mb-3" placeholder="Write a comment (optional)">
      </div>
      <div>
        <label for="descriptionInput">Description</label>
        <textarea [(ngModel)]="newAttraction.description" name="description" id="descriptionInput" rows="3" class="form-control mb-3" placeholder="Write a comment (optional)"></textarea>
      </div>
		</form>
	</div>

	<div class="modal-footer">
		<button type="button" class="btn btn-outline-secondary" (click)="modal.close('Cross click')">Cancel</button>
		<button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Create</button>
	</div>
</ng-template>



<ng-template #delete let-modal>

	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Attraction deletion</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>

	<div class="modal-body">
    <p>Are you sure you want to delete this attraction?</p>
    <p>All information associated to this attraction will be permanently deleted. This operation can not be undone.</p>
	</div>

	<div class="modal-footer">
		<button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('Cross click')">Cancel</button>
		<button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Delete</button>
	</div>
</ng-template>